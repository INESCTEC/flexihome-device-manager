openapi: 3.0.0
info:
  contact:
    email: vasco.m.campos@inesctec.pt
    name: Vasco Campos
  description: |-
    Device Manager Service OpenAPI definition.

    This service has the following functions: scan, add, delete, send commands, view measurements and state of the devices.

    Find out more: [Device Manager Service documentation](https://gitlab.inesctec.pt/cpes/european-projects/interconnect/hems/hems-documentation/-/blob/master/Microservices/Device-Manager-Service.adoc)
  title: Device Manager Service
  version: 1.0.0
servers:
- url: https://interconnect-dev.inesctec.pt/api/device
security:
- {}
- Bearer: []
tags:
- description: For testing purposes only
  name: Mock endpoints
- description: For managing appliances
  name: Device management
- description: For managing pools
  name: Pool requests
- description: For managing device operation cycles
  name: Device schedules
- description: For interoperability management
  name: SSA endpoints
paths:
  /bsh-devices:
    description: Fetch user's devices from its HomeConnect account after the user
      completed any BSH OAuth flow.
    get:
      operationId: bsh_devices_get
      parameters:
      - explode: true
        in: query
        name: device_brand
        required: true
        schema:
          $ref: '#/components/schemas/BshBrand'
        style: form
      - explode: true
        in: query
        name: token
        required: true
        schema:
          $ref: '#/components/schemas/UserId'
        style: form
      - explode: true
        in: query
        name: device_ids
        required: true
        schema:
          example:
          - 1.85888214E8
          - BOSCH-WAX28EH0ES-68A40E946F87
          items:
            $ref: '#/components/schemas/SerialNumber'
          type: array
        style: form
      - explode: true
        in: query
        name: ssa
        required: true
        schema:
          example: 855147728290e70f7b764c623dd7b0317d4891d8ba3643e259b1bbf037f7653e7a7fce5243c2e05e60e93c2dbf10861f1202283e6001fe59701a46dcc4614348
          type: string
        style: form
      responses:
        "201":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Device'
                type: array
          description: Bosch devices received and saved to DB
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "204":
          content:
            application/json:
              schema:
                example: []
                items:
                  $ref: '#/components/schemas/Device'
                type: array
          description: Bosch devices already associated to user account
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "500":
          content:
            application/json:
              examples:
                Database Error:
                  value:
                    error: Unable to complete database process
              schema:
                $ref: '#/components/schemas/Error'
          description: Error in database session. Try again.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: BSH "follow" request for any BSH device
      tags:
      - SSA endpoints
      x-openapi-router-controller: device_manager_service.controllers.ssa_endpoints_controller
  /device:
    delete:
      operationId: device_delete
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: true
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: serial_number
        required: true
        schema:
          $ref: '#/components/schemas/SerialNumber'
        style: form
      - explode: true
        in: query
        name: delete_type
        required: true
        schema:
          $ref: '#/components/schemas/DeleteType'
        style: form
      responses:
        "200":
          description: Removed device from user account.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                Device Id not found:
                  value:
                    error: device with id "serial_number" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: Device id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Remove device from user account.
      tags:
      - Device management
      x-openapi-router-controller: device_manager_service.controllers.device_management_controller
    description: Endpoints to manage devices.
    get:
      operationId: device_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: user_ids
        required: false
        schema:
          example:
          - userId1
          - userId2
          items:
            $ref: '#/components/schemas/UserId'
          minItems: 1
          type: array
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/UserDeviceList'
                type: array
          description: List of devices of user accounts.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: List all devices per user account.
      tags:
      - Device management
      x-openapi-router-controller: device_manager_service.controllers.device_management_controller
    post:
      deprecated: true
      operationId: device_post
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: true
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: brand
        required: true
        schema:
          $ref: '#/components/schemas/Brand'
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddDeviceRequestBody'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Device'
          description: Added device to user account.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
          description: Device already exists in users account (409 Conflict)
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Add device to user account.
      tags:
      - Mock endpoints
      x-openapi-router-controller: device_manager_service.controllers.mock_endpoints_controller
  /device/settings/set-automatic-management:
    description: Endpoint to set automatic management of settings per device.
    post:
      operationId: device_settings_set_automatic_management_post
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: serial_number
        required: true
        schema:
          $ref: '#/components/schemas/SerialNumber'
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AutomaticManagementResponseBody'
          description: Device's automatic management settings changed.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Set automatic management of settings per device.
      tags:
      - Device management
      x-openapi-router-controller: device_manager_service.controllers.device_management_controller
  /get-user-wp-appliances:
    description: Get appliances associated with the user's HotPoint Home Net account.
    get:
      operationId: get_user_wp_appliances_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: true
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Device'
                type: array
          description: List of devices of user accounts.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Get appliances associated with the user's HotPoint Home Net account.
      tags:
      - SSA endpoints
      x-openapi-router-controller: device_manager_service.controllers.ssa_endpoints_controller
  /perfect-pool-by-user:
    description: Perfect pools per user.
    get:
      operationId: perfect_pool_by_user_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: user_ids
        required: true
        schema:
          example:
          - userId1
          - userId2
          items:
            $ref: '#/components/schemas/UserId'
          minItems: 1
          type: array
        style: form
      - explode: true
        in: query
        name: start_date
        required: true
        schema:
          $ref: '#/components/schemas/Date'
        style: form
      - explode: true
        in: query
        name: end_date
        required: true
        schema:
          $ref: '#/components/schemas/Date'
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/PoolByUser'
                type: array
          description: List of perfect pools by user
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Get perfect pools per user.
      tags:
      - Pool requests
      x-openapi-router-controller: device_manager_service.controllers.pool_requests_controller
  /pool-by-device:
    description: Endpoint to manage the day ahead pool of schedules per device.
    get:
      deprecated: true
      operationId: pool_by_device_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: serial_numbers
        required: true
        schema:
          example:
          - 1.85888214E8
          - BOSCH-WAX28EH0ES-68A40E946F87
          items:
            $ref: '#/components/schemas/SerialNumber'
          minItems: 1
          type: array
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/PoolByDevice'
                type: array
          description: List of devices and their schedules in the pool (day ahead)
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Get scheduled pool per device.
      tags:
      - Pool requests
      x-openapi-router-controller: device_manager_service.controllers.pool_requests_controller
  /pool-by-user:
    description: Endpoint to get the day ahead pool of schedules per user.
    get:
      deprecated: true
      operationId: pool_by_user_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: user_ids
        required: true
        schema:
          example:
          - userId1
          - userId2
          items:
            $ref: '#/components/schemas/UserId'
          minItems: 1
          type: array
        style: form
      responses:
        "200":
          content:
            application/json:
              examples:
                pool with multiple devices:
                  $ref: '#/components/examples/pool_example'
              schema:
                items:
                  $ref: '#/components/schemas/PoolByUser'
                type: array
          description: List of all devices per user and their schedules in the pool
            (day ahead)
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Get scheduled pools per user.
      tags:
      - Pool requests
      x-openapi-router-controller: device_manager_service.controllers.pool_requests_controller
  /request-delay-by-cycle:
    description: Request the delay of a machine cycle to the manufacturer SSA
    post:
      operationId: request_delay_by_cycle_post
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: user-id
        required: true
        schema:
          $ref: '#/components/schemas/UserId'
        style: form
      - description: Link to a recommendation on the energy manager service
        explode: true
        in: query
        name: recommendation_id
        required: false
        schema:
          example: 1
          type: integer
        style: form
      requestBody:
        content:
          application/json:
            schema:
              items:
                $ref: '#/components/schemas/DelaysByCycleRequestBody'
              type: array
        description: Send delay requests to each 'sequence_id', as long as it belons
          to the user 'user_id'. The 'new_start_time' MUST be in UTC.
        required: true
      responses:
        "207":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/DelaysStatus'
                type: array
          description: |
            Delay requests sent to and returned from the manufacturer successfully.
            Each delay has its own chance of failing, making this a multi-status request (207).
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Request the delay of a machine cycle to the manufacturer SSA
      tags:
      - SSA endpoints
      x-openapi-router-controller: device_manager_service.controllers.ssa_endpoints_controller
  /schedule-cycle-by-device:
    description: Mock manufacturer method to schedule a cycle to a machine.
    get:
      operationId: schedule_cycle_by_device_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: serial_numbers
        required: true
        schema:
          example:
          - 1.85888214E8
          - BOSCH-WAX28EH0ES-68A40E946F87
          items:
            $ref: '#/components/schemas/SerialNumber'
          minItems: 1
          type: array
        style: form
      - explode: true
        in: query
        name: start_timestamp
        required: false
        schema:
          $ref: '#/components/schemas/Timestamp'
        style: form
      - explode: true
        in: query
        name: end_timestamp
        required: false
        schema:
          $ref: '#/components/schemas/Timestamp'
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/MachineCycleByDevice'
                type: array
          description: List of machine scheduled cycles per device
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Get scheduled cycles per device.
      tags:
      - Device schedules
      x-openapi-router-controller: device_manager_service.controllers.device_schedules_controller
    post:
      deprecated: true
      operationId: schedule_cycle_by_device_post
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: serial_number
        required: true
        schema:
          $ref: '#/components/schemas/SerialNumber'
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ScheduleCycleRequestBody'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MachineCycle'
          description: Cycle created successfully
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Schedule new cycle for appliance (MOCK manufacturer SSA endpoint).
      tags:
      - Mock endpoints
      x-openapi-router-controller: device_manager_service.controllers.mock_endpoints_controller
  /schedule-cycle-by-user:
    description: Scheduled cycles per user.
    get:
      operationId: schedule_cycle_by_user_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: user_ids
        required: true
        schema:
          example:
          - userId1
          - userId2
          items:
            $ref: '#/components/schemas/UserId'
          minItems: 1
          type: array
        style: form
      - explode: true
        in: query
        name: start_timestamp
        required: false
        schema:
          $ref: '#/components/schemas/Timestamp'
        style: form
      - explode: true
        in: query
        name: end_timestamp
        required: false
        schema:
          $ref: '#/components/schemas/Timestamp'
        style: form
      - explode: true
        in: query
        name: is_cycle_optimized
        required: false
        schema:
          $ref: '#/components/schemas/Optimized'
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/MachineCycleByUser'
                type: array
          description: List of machine scheduled cycles by user
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Get scheduled cycles per user.
      tags:
      - Device schedules
      x-openapi-router-controller: device_manager_service.controllers.device_schedules_controller
  /settings-by-device:
    description: Endpoint to manage settings per device.
    get:
      operationId: settings_by_device_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: serial_numbers
        required: true
        schema:
          example:
          - 1.85888214E8
          - BOSCH-WAX28EH0ES-68A40E946F87
          items:
            $ref: '#/components/schemas/SerialNumber'
          minItems: 1
          type: array
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/SettingsByDevice'
                type: array
          description: Device settings
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Get settings per device.
      tags:
      - Device management
      x-openapi-router-controller: device_manager_service.controllers.device_management_controller
    post:
      operationId: settings_by_device_post
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: serial_number
        required: true
        schema:
          $ref: '#/components/schemas/SerialNumber'
        style: form
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotDisturb'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Settings'
          description: Device settings
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Update not disturb settings per device.
      tags:
      - Device management
      x-openapi-router-controller: device_manager_service.controllers.device_management_controller
  /settings-by-user:
    description: Endpoint to get settings of all devices of user.
    get:
      operationId: settings_by_user_get
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      - explode: true
        in: query
        name: user_ids
        required: true
        schema:
          example:
          - userId1
          - userId2
          items:
            $ref: '#/components/schemas/UserId'
          minItems: 1
          type: array
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/SettingsByUser'
                type: array
          description: List of all devices of user and their settings
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                User Id not found:
                  value:
                    error: user with id "userId" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: User id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Get settings of all devices of user.
      tags:
      - Device management
      x-openapi-router-controller: device_manager_service.controllers.device_management_controller
  /ssa/device/allow-hems:
    description: Allow HEMS to manage the device.
    post:
      operationId: ssa_device_allow_hems_post
      parameters:
      - explode: false
        in: header
        name: X-Correlation-ID
        required: true
        schema:
          $ref: '#/components/schemas/CorrelationId'
        style: simple
      - explode: false
        in: header
        name: Authorization
        required: false
        schema:
          $ref: '#/components/schemas/Authorization'
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AllowHemsRequestBody'
        required: true
      responses:
        "200":
          description: Device is now managed by the HEMS.
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "400":
          content:
            application/json:
              examples:
                Timestamp error:
                  value:
                    error: one or more timestamps in the request are invalid
                Missing X-Correlation-ID header:
                  value:
                    error: missing X-Correlation-ID header
              schema:
                $ref: '#/components/schemas/Error'
          description: Bad Request
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "401":
          content:
            application/json:
              examples:
                Unauthenticated:
                  value:
                    error: error in authorization token
              schema:
                $ref: '#/components/schemas/Error'
          description: Unauthenticated or invalid credentials
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "403":
          content:
            application/json:
              examples:
                Forbidden:
                  value:
                    error: you are not authorized to access this information
              schema:
                $ref: '#/components/schemas/Error'
          description: Forbidden to access the information requested
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
        "404":
          content:
            application/json:
              examples:
                Device Id not found:
                  value:
                    error: device with id "serial_number" not found
              schema:
                $ref: '#/components/schemas/Error'
          description: Device id not found
          headers:
            X-Correlation-ID:
              $ref: '#/components/headers/CorrelationId'
      summary: Allow HEMS to manage the device.
      tags:
      - SSA endpoints
      x-openapi-router-controller: device_manager_service.controllers.ssa_endpoints_controller
components:
  examples:
    wm_wp_no_cycles:
      value:
        attributes:
          name: my washer
          device_type: FabricCare
          brand: Hotpoint
          serial_number: WPR4LLLG8NWD4
        washing_cycles: []
        not_disturb: []
    pool_example:
      value:
      - user_id: 4c5e80dfjc
        pool:
        - serial_number: Miele-Dishwasher-1029999753
          device_type: Dishwasher
          brand: Miele
          name: my Miele dishwasher
          cycles_in_pool:
          - sequence_id: 40A45E3C-AEDF-456A-A7F8-5A9FF3F8CD97
            earliest_start_time: 01-04-2022T06:00:00Z
            latest_end_time: 01-04-2022T23:00:00Z
            scheduled_start_time: 01-04-2022T10:00:00Z
            expected_end_time: 01-04-2022T11:30:00Z
            program: cotton
            is_optimized: true
            power_profile:
            - slot: 1
              max_power: 300
              power_units: W
              duration: 4.0
              duration_units: minutes
            - slot: 2
              max_power: 2600
              power_units: W
              duration: 76.0
              duration_units: minutes
            - slot: 3
              max_power: 100
              power_units: W
              duration: 2.0
              duration_units: minutes
            - slot: 4
              max_power: 1100
              power_units: W
              duration: 15.0
              duration_units: minutes
        - serial_number: Bosch-Dryer-1290999325
          device_type: Dryer
          cycles_in_pool:
          - sequence_id: 40A45E3C-AEDF-456A-A7F8-92D0221S
            earliest_start_time: 01-04-2022T06:00:00Z
            latest_end_time: 01-04-2022T23:00:00Z
            scheduled_start_time: 01-04-2022T16:00:00Z
            expected_end_time: 01-04-2022T17:30:00Z
            program: cotton
            is_optimized: true
            power_profile:
            - slot: 1
              max_power: 200
              min_power: 100
              expected_power: 120
              power_units: W
              duration: 4.0
              duration_units: minutes
            - slot: 2
              max_power: 1900
              min_power: 1000
              expected_power: 1300
              power_units: W
              duration: 65.0
              duration_units: minutes
            - slot: 3
              max_power: 230
              min_power: 80
              expected_power: 200
              power_units: W
              duration: 5.0
              duration_units: minutes
            - slot: 4
              max_power: 890
              min_power: 340
              expected_power: 510
              power_units: W
              duration: 20.0
              duration_units: minutes
      - user_id: 58ol2se2lb
        pool:
        - serial_number: WPR4LLLG8NWD4
          name: my home washer
          device_type: FabricCare
          cycles_in_pool:
          - sequence_id: 02LL221-AE2F-412A-A7ST-028KKL22HF
            earliest_start_time: 01-04-2022T06:00:00Z
            latest_end_time: 01-04-2022T23:00:00Z
            scheduled_start_time: 01-04-2022T08:00:00Z
            expected_end_time: 01-04-2022T09:30:00Z
            program: easy_care
            is_optimized: true
            power_profile:
            - slot: 1
              max_power: 200
              power_units: W
              duration: 13.0
              duration_units: minutes
            - slot: 2
              max_power: 1000
              power_units: W
              duration: 47.0
              duration_units: minutes
            - slot: 3
              max_power: 100
              power_units: W
              duration: 5.0
              duration_units: minutes
  headers:
    CorrelationId:
      explode: false
      required: true
      schema:
        $ref: '#/components/schemas/CorrelationId'
      style: simple
    Authorization:
      explode: false
      required: true
      schema:
        $ref: '#/components/schemas/Authorization'
      style: simple
  parameters:
    CorrelationId:
      explode: false
      in: header
      name: X-Correlation-ID
      required: true
      schema:
        $ref: '#/components/schemas/CorrelationId'
      style: simple
    RequiredAuthorization:
      explode: false
      in: header
      name: Authorization
      required: true
      schema:
        $ref: '#/components/schemas/Authorization'
      style: simple
    Authorization:
      explode: false
      in: header
      name: Authorization
      required: false
      schema:
        $ref: '#/components/schemas/Authorization'
      style: simple
    UserId:
      explode: false
      in: path
      name: user-id
      required: true
      schema:
        $ref: '#/components/schemas/UserId'
      style: simple
    UserIdQuery:
      explode: true
      in: query
      name: user-id
      required: true
      schema:
        $ref: '#/components/schemas/UserId'
      style: form
    UserIds:
      explode: true
      in: query
      name: user_ids
      required: true
      schema:
        example:
        - userId1
        - userId2
        items:
          $ref: '#/components/schemas/UserId'
        minItems: 1
        type: array
      style: form
    NonRequiredUserIds:
      explode: true
      in: query
      name: user_ids
      required: false
      schema:
        example:
        - userId1
        - userId2
        items:
          $ref: '#/components/schemas/UserId'
        minItems: 1
        type: array
      style: form
    DeviceIds:
      explode: true
      in: query
      name: device_ids
      required: true
      schema:
        example:
        - 1.85888214E8
        - BOSCH-WAX28EH0ES-68A40E946F87
        items:
          $ref: '#/components/schemas/SerialNumber'
        type: array
      style: form
    SerialNumbers:
      explode: true
      in: query
      name: serial_numbers
      required: true
      schema:
        example:
        - 1.85888214E8
        - BOSCH-WAX28EH0ES-68A40E946F87
        items:
          $ref: '#/components/schemas/SerialNumber'
        minItems: 1
        type: array
      style: form
    SerialNumber:
      explode: true
      in: query
      name: serial_number
      required: true
      schema:
        $ref: '#/components/schemas/SerialNumber'
      style: form
    Delays:
      explode: true
      in: query
      name: delays
      required: true
      schema:
        example:
        - 2022-06-30T23:59:59Z
        - 2022-06-30T23:59:59Z
        items:
          $ref: '#/components/schemas/Timestamp'
        minItems: 1
        type: array
      style: form
    Brand:
      explode: true
      in: query
      name: brand
      required: true
      schema:
        $ref: '#/components/schemas/Brand'
      style: form
    BshBrand:
      explode: true
      in: query
      name: device_brand
      required: true
      schema:
        $ref: '#/components/schemas/BshBrand'
      style: form
    StartDate:
      explode: true
      in: query
      name: start_date
      required: true
      schema:
        $ref: '#/components/schemas/Date'
      style: form
    EndDate:
      explode: true
      in: query
      name: end_date
      required: true
      schema:
        $ref: '#/components/schemas/Date'
      style: form
    StartTimestamp:
      explode: true
      in: query
      name: start_timestamp
      required: false
      schema:
        $ref: '#/components/schemas/Timestamp'
      style: form
    EndTimestamp:
      explode: true
      in: query
      name: end_timestamp
      required: false
      schema:
        $ref: '#/components/schemas/Timestamp'
      style: form
    IsOptimized:
      explode: true
      in: query
      name: is_cycle_optimized
      required: false
      schema:
        $ref: '#/components/schemas/Optimized'
      style: form
    DeleteType:
      explode: true
      in: query
      name: delete_type
      required: true
      schema:
        $ref: '#/components/schemas/DeleteType'
      style: form
    Token:
      explode: true
      in: query
      name: token
      required: true
      schema:
        $ref: '#/components/schemas/UserId'
      style: form
    SSA:
      explode: true
      in: query
      name: ssa
      required: true
      schema:
        example: 855147728290e70f7b764c623dd7b0317d4891d8ba3643e259b1bbf037f7653e7a7fce5243c2e05e60e93c2dbf10861f1202283e6001fe59701a46dcc4614348
        type: string
      style: form
    RecommendationId:
      description: Link to a recommendation on the energy manager service
      explode: true
      in: query
      name: recommendation_id
      required: false
      schema:
        example: 1
        type: integer
      style: form
  responses:
    BadRequest:
      content:
        application/json:
          examples:
            Timestamp error:
              value:
                error: one or more timestamps in the request are invalid
            Missing X-Correlation-ID header:
              value:
                error: missing X-Correlation-ID header
          schema:
            $ref: '#/components/schemas/Error'
      description: Bad Request
      headers:
        X-Correlation-ID:
          $ref: '#/components/headers/CorrelationId'
    InvalidCredentials:
      content:
        application/json:
          examples:
            Unauthenticated:
              value:
                error: error in authorization token
          schema:
            $ref: '#/components/schemas/Error'
      description: Unauthenticated or invalid credentials
      headers:
        X-Correlation-ID:
          $ref: '#/components/headers/CorrelationId'
    Forbidden:
      content:
        application/json:
          examples:
            Forbidden:
              value:
                error: you are not authorized to access this information
          schema:
            $ref: '#/components/schemas/Error'
      description: Forbidden to access the information requested
      headers:
        X-Correlation-ID:
          $ref: '#/components/headers/CorrelationId'
    UserIdNotFound:
      content:
        application/json:
          examples:
            User Id not found:
              value:
                error: user with id "userId" not found
          schema:
            $ref: '#/components/schemas/Error'
      description: User id not found
      headers:
        X-Correlation-ID:
          $ref: '#/components/headers/CorrelationId'
    SerialNumberNotFound:
      content:
        application/json:
          examples:
            Device Id not found:
              value:
                error: device with id "serial_number" not found
          schema:
            $ref: '#/components/schemas/Error'
      description: Device id not found
      headers:
        X-Correlation-ID:
          $ref: '#/components/headers/CorrelationId'
    DatabaseError:
      content:
        application/json:
          examples:
            Database Error:
              value:
                error: Unable to complete database process
          schema:
            $ref: '#/components/schemas/Error'
      description: Error in database session. Try again.
      headers:
        X-Correlation-ID:
          $ref: '#/components/headers/CorrelationId'
  schemas:
    CorrelationId:
      format: uuid
      type: string
    UserId:
      example: 4c5e80dfjc
      maxLength: 10
      minLength: 10
      title: user_id
      type: string
    Authorization:
      format: byte
      type: string
    Timestamp:
      example: 2022-06-30T23:59:59Z
      format: date-time
      title: Timestamp
      type: string
    Date:
      example: 2022-05-17
      format: date
      pattern: (((19|20)([2468][048]|[13579][26]|0[48])|2000)[/-]02[/-]29|((19|20)[0-9]{2}[/-](0[4678]|1[02])[/-](0[1-9]|[12][0-9]|30)|(19|20)[0-9]{2}[/-](0[1359]|11)[/-](0[1-9]|[12][0-9]|3[01])|(19|20)[0-9]{2}[/-]02[/-](0[1-9]|1[0-9]|2[0-8])))
      type: string
    Delayed:
      example: true
      title: delayed
      type: boolean
    Optimized:
      enum:
      - "true"
      - "false"
      example: "false"
      title: Optimized
      type: string
    DeleteType:
      enum:
      - soft
      - hard
      example: soft
      title: DeleteType
      type: string
    AddDeviceRequestBody:
      example:
        serial_number: WPR4LLLG8NWD4
      properties:
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
      type: object
    RemoveDeviceRequestBody:
      properties:
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
      required:
      - serial_number
      type: object
    ScheduleCycleRequestBody:
      example:
        program: cotton
        scheduled_start_time: 2022-06-30T23:59:59Z
      properties:
        scheduled_start_time:
          example: 2022-06-30T23:59:59Z
          format: date-time
          title: earliest_start_time
          type: string
        program:
          example: cotton
          type: string
      required:
      - program
      - scheduled_start_time
      type: object
    Device:
      oneOf:
      - $ref: '#/components/schemas/ShiftableMachine'
      title: Device
    UserDeviceList:
      example:
        user_id: 4c5e80dfjc
        devices:
        - null
        - null
      properties:
        user_id:
          example: 4c5e80dfjc
          maxLength: 10
          minLength: 10
          title: user_id
          type: string
        devices:
          items:
            $ref: '#/components/schemas/Device'
          title: devices
          type: array
      required:
      - devices
      - user_id
      title: UserDeviceList
      type: object
    ShiftableMachine:
      properties:
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
        name:
          example: my home washer
          type: string
        device_type:
          example: FabricCare
          title: device_type
          type: string
        brand:
          example: Hotpoint
          type: string
        allow_hems:
          example: true
          type: boolean
        automatic_management:
          example: true
          type: boolean
        device_ssa:
          example: https://ke-pt.interconnectproject.eu/rest/adapter/hems-spine-adapter
          type: string
        not_disturb:
          $ref: '#/components/schemas/NotDisturb'
      required:
      - allow_hems
      - automatic_management
      - brand
      - device_type
      - not_disturb
      - serial_number
      type: object
    DeviceName:
      example: my home washer
      type: string
    Brand:
      example: Hotpoint
      type: string
    BshBrand:
      enum:
      - bosch
      - miele
      - bsh
      example: bosch
      title: BshBrand
      type: string
    SerialNumber:
      example: WPR4LLLG8NWD4
      title: serial_number
      type: string
    ApplianceType:
      example: FabricCare
      title: device_type
      type: string
    PowerUnits:
      enum:
      - W
      - kW
      title: PowerUnits
      type: string
    NotDisturb:
      example:
        sunday:
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        saturday:
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        tuesday:
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        wednesday:
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        thursday:
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        friday:
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        monday:
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
        - end_timestamp: 2022-06-30T23:59:59Z
          start_timestamp: 2022-06-30T23:59:59Z
      properties:
        sunday:
          items:
            $ref: '#/components/schemas/PeriodOfDay'
          title: sunday
          type: array
        monday:
          items:
            $ref: '#/components/schemas/PeriodOfDay'
          title: monday
          type: array
        tuesday:
          items:
            $ref: '#/components/schemas/PeriodOfDay'
          title: tuesday
          type: array
        wednesday:
          items:
            $ref: '#/components/schemas/PeriodOfDay'
          title: wednesday
          type: array
        thursday:
          items:
            $ref: '#/components/schemas/PeriodOfDay'
          title: thursday
          type: array
        friday:
          items:
            $ref: '#/components/schemas/PeriodOfDay'
          title: friday
          type: array
        saturday:
          items:
            $ref: '#/components/schemas/PeriodOfDay'
          title: saturday
          type: array
      title: NotDisturb
      type: object
    PeriodOfDay:
      example:
        end_timestamp: 2022-06-30T23:59:59Z
        start_timestamp: 2022-06-30T23:59:59Z
      properties:
        start_timestamp:
          example: 2022-06-30T23:59:59Z
          format: date-time
          title: Timestamp
          type: string
        end_timestamp:
          example: 2022-06-30T23:59:59Z
          format: date-time
          title: Timestamp
          type: string
      required:
      - end_timestamp
      - start_timestamp
      title: PeriodOfDay
      type: object
    ShiftableMachineCycle:
      properties:
        sequence_id:
          example: 40A45E3C-AEDF-456A-A7F8-5A9FF3F8CD97
          title: sequence_id
          type: string
        earliest_start_time:
          example: 2022-06-30T23:59:59Z
          format: date-time
          title: Timestamp
          type: string
        latest_end_time:
          example: 2022-06-30T23:59:59Z
          format: date-time
          title: Timestamp
          type: string
        scheduled_start_time:
          example: 2022-06-30T23:59:59Z
          format: date-time
          title: Timestamp
          type: string
        expected_end_time:
          example: 2022-06-30T23:59:59Z
          format: date-time
          title: Timestamp
          type: string
        program:
          example: cotton
          type: string
        is_optimized:
          example: true
          type: boolean
        power_profile:
          items:
            $ref: '#/components/schemas/PowerProfile'
          type: array
      required:
      - expected_end_time
      - is_optimized
      - power_profile
      - program
      - scheduled_start_time
      - sequence_id
      type: object
    SequenceId:
      example: 40A45E3C-AEDF-456A-A7F8-5A9FF3F8CD97
      title: sequence_id
      type: string
    WashingProgram:
      example: cotton
      type: string
    PowerProfile:
      properties:
        slot:
          example: 1
          title: slot
          type: integer
        max_power:
          example: 300
          minimum: 0
          title: max_power
          type: number
        min_power:
          example: 100
          minimum: 0
          title: min_power
          type: number
        expected_power:
          example: 200
          minimum: 0
          title: expected_power
          type: number
        power_units:
          $ref: '#/components/schemas/PowerUnits'
        duration:
          example: 4.0
          minimum: 0
          title: duration
          type: number
        duration_units:
          enum:
          - minutes
          example: minutes
          title: duration_units
          type: string
      required:
      - duration
      - duration_units
      - max_power
      - power_units
      - slot
      title: PowerProfile
      type: object
    MachineCycleByDevice:
      example:
        serial_number: WPR4LLLG8NWD4
        cycles:
        - null
        - null
      properties:
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
        cycles:
          items:
            $ref: '#/components/schemas/MachineCycle'
          title: cycles
          type: array
      required:
      - cycles
      - serial_number
      title: MachineCycleByDevice
      type: object
    MachineCycleByUser:
      example:
        user_id: 4c5e80dfjc
        cycles:
        - serial_number: WPR4LLLG8NWD4
          cycles:
          - null
          - null
        - serial_number: WPR4LLLG8NWD4
          cycles:
          - null
          - null
      properties:
        user_id:
          example: 4c5e80dfjc
          maxLength: 10
          minLength: 10
          title: user_id
          type: string
        cycles:
          items:
            $ref: '#/components/schemas/MachineCycleByDevice'
          title: cycles
          type: array
      required:
      - cycles
      - user_id
      title: MachineCycleByUser
      type: object
    Settings:
      oneOf:
      - $ref: '#/components/schemas/ShiftableMachineSettings'
      title: Settings
    ShiftableMachineSettings:
      properties:
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
        not_disturb:
          $ref: '#/components/schemas/NotDisturb'
        allow_hems:
          example: true
          type: boolean
        automatic_management:
          example: true
          type: boolean
      required:
      - allow_hems
      - automatic_management
      - not_disturb
      - serial_number
      type: object
    SettingsByDevice:
      example:
        settings:
        - null
        - null
      properties:
        settings:
          items:
            $ref: '#/components/schemas/Settings'
          title: settings
          type: array
      required:
      - settings
      title: SettingsByDevice
      type: object
    SettingsByUser:
      example:
        settings:
        - null
        - null
        user_id: 4c5e80dfjc
      properties:
        user_id:
          example: 4c5e80dfjc
          maxLength: 10
          minLength: 10
          title: user_id
          type: string
        settings:
          items:
            $ref: '#/components/schemas/Settings'
          title: settings
          type: array
      required:
      - settings
      - user_id
      title: SettingsByUser
      type: object
    Pool:
      example:
        serial_number: WPR4LLLG8NWD4
        device_type: FabricCare
        cycles_in_pool:
        - null
        - null
      properties:
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
        device_type:
          example: FabricCare
          title: device_type
          type: string
        cycles_in_pool:
          items:
            $ref: '#/components/schemas/MachineCycle'
          title: cycles_in_pool
          type: array
      required:
      - cycles_in_pool
      - serial_number
      title: Pool
      type: object
    MachineCycle:
      oneOf:
      - $ref: '#/components/schemas/ShiftableMachineCycle'
      title: MachineCycle
    PoolByDevice:
      example:
        pool:
        - serial_number: WPR4LLLG8NWD4
          device_type: FabricCare
          cycles_in_pool:
          - null
          - null
        - serial_number: WPR4LLLG8NWD4
          device_type: FabricCare
          cycles_in_pool:
          - null
          - null
      properties:
        pool:
          items:
            $ref: '#/components/schemas/Pool'
          title: pool
          type: array
      required:
      - pool
      title: PoolByDevice
      type: object
    PoolByUser:
      example:
        user_id: 4c5e80dfjc
        pool:
        - serial_number: WPR4LLLG8NWD4
          device_type: FabricCare
          cycles_in_pool:
          - null
          - null
        - serial_number: WPR4LLLG8NWD4
          device_type: FabricCare
          cycles_in_pool:
          - null
          - null
      properties:
        user_id:
          example: 4c5e80dfjc
          maxLength: 10
          minLength: 10
          title: user_id
          type: string
        pool:
          items:
            $ref: '#/components/schemas/Pool'
          title: pool
          type: array
      required:
      - pool
      - user_id
      title: PoolByUser
      type: object
    DelaysByCycleRequestBody:
      example:
        new_start_time: 2022-06-30T23:59:59Z
        sequence_id: 40A45E3C-AEDF-456A-A7F8-5A9FF3F8CD97
        serial_number: WPR4LLLG8NWD4
      properties:
        sequence_id:
          example: 40A45E3C-AEDF-456A-A7F8-5A9FF3F8CD97
          title: sequence_id
          type: string
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
        new_start_time:
          example: 2022-06-30T23:59:59Z
          format: date-time
          title: Timestamp
          type: string
      required:
      - new_start_time
      - sequence_id
      - serial_number
      title: DelaysByCycleRequestBody
      type: object
    DelaysStatus:
      example:
        sequence_id: 40A45E3C-AEDF-456A-A7F8-5A9FF3F8CD97
        serial_number: WPR4LLLG8NWD4
        delayed: true
        message: Delayed successfully
      properties:
        sequence_id:
          example: 40A45E3C-AEDF-456A-A7F8-5A9FF3F8CD97
          title: sequence_id
          type: string
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
        delayed:
          example: true
          title: delayed
          type: boolean
        message:
          example: Delayed successfully
          title: message
          type: string
      required:
      - delayed
      - message
      - sequence_id
      - serial_number
      title: DelaysStatus
      type: object
    AllowHemsRequestBody:
      example:
        allow_hems: true
        serial_number: WPR4LLLG8NWD4
        device_ssa: https://ke-pt.interconnectproject.eu/rest/adapter/hems-spine-adapter
      properties:
        device_ssa:
          example: https://ke-pt.interconnectproject.eu/rest/adapter/hems-spine-adapter
          type: string
        serial_number:
          example: WPR4LLLG8NWD4
          title: serial_number
          type: string
        allow_hems:
          example: true
          type: boolean
      required:
      - allow_hems
      - device_ssa
      - serial_number
      type: object
    AutomaticManagementResponseBody:
      example:
        automatic_management: true
      properties:
        automatic_management:
          example: true
          title: automatic_management
          type: boolean
      required:
      - automatic_management
      title: AutomaticManagementResponseBody
      type: object
    Error:
      description: Error model
      properties:
        error:
          title: error
          type: string
      required:
      - error
      title: Error
      type: object
  securitySchemes:
    Bearer:
      bearerFormat: JWT
      scheme: bearer
      type: http
      x-bearerInfoFunc: device_manager_service.controllers.security_controller_.info_from_Bearer
